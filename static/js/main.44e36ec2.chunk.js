(this["webpackJsonpuseaudiopip-example"]=this["webpackJsonpuseaudiopip-example"]||[]).push([[0],[,,,,function(e,t,n){e.exports=n.p+"static/media/808s_stand_out.77bdd2c8.ogg"},function(e,t,n){e.exports=n.p+"static/media/Kicking_away.3f33c968.mp3"},function(e,t,n){e.exports=n.p+"static/media/Problems_away.1c600bca.flac"},function(e,t,n){e.exports=n(16)},,,,,,,function(e,t,n){},,function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(1),i=n.n(c),o=(n(14),n(3)),u=n(2),s=n.n(u);function l(e,t,n,a,r,c,i){try{var o=e[c](i),u=o.value}catch(s){return void n(s)}o.done?t(u):Promise.resolve(u).then(a,r)}function m(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var c=e.apply(t,n);function i(e){l(c,a,r,i,o,"next",e)}function o(e){l(c,a,r,i,o,"throw",e)}i(void 0)}))}}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],a=!0,r=!1,c=void 0;try{for(var i,o=e[Symbol.iterator]();!(a=(i=o.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(u){r=!0,c=u}finally{try{a||null==o.return||o.return()}finally{if(r)throw c}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var p=n(4),f=n.n(p),h=n(5),g=n.n(h),b=n(6),v=n.n(b),E=function(){var e=r.a.createRef(),t=Object(a.useState)([{name:"808's Stand out",author:"Thomas Cogez",src:f.a,thumbnail:"https://i1.sndcdn.com/artworks-000568527800-jirbdh-t500x500.jpg"},{name:"Kicking away",author:"Thomas Cogez",src:g.a,thumbnail:"https://i1.sndcdn.com/artworks-000584266589-finyvt-t200x200.jpg"},{name:"Problems away",author:"Thomas Cogez",src:v.a,thumbnail:"https://i1.sndcdn.com/avatars-000533821485-ez22ce-t500x500.jpg"}]),n=Object(o.a)(t,1)[0],c=Object(a.useState)(0),u=Object(o.a)(c,2),l=u[0],p=u[1],h=Object(a.useState)(!1),b=Object(o.a)(h,2),E=b[0],y=b[1],P=function(){p((l+1)%n.length)},x=function(){p((l-1+n.length)%n.length)};Object(a.useEffect)((function(){console.log(E),E?i.a.findDOMNode(e.current).play():i.a.findDOMNode(e.current).pause()}),[E]),Object(a.useEffect)((function(){i.a.findDOMNode(e.current).src=n[l].src,k&&I(n[l].thumbnail),i.a.findDOMNode(e.current).play(),y(!0)}),[l]);var w=function(e,t,n,r,c){var i=d(Object(a.useState)(!1),2),o=i[0],u=i[1],l=e,p=document.createElement("canvas");p.width=p.height=512;var f=document.createElement("video");f.srcObject=p.captureStream(),f.muted=!0;var h=function(){var e=m(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!document.pictureInPictureElement){e.next=5;break}return e.next=3,document.exitPictureInPicture().then((function(){u(!1)}));case 3:e.next=9;break;case 5:return e.next=7,g(l);case 7:return e.next=9,f.requestPictureInPicture().then((function(){u(!0)}));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=m(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return document.pictureInPictureElement&&document.exitPictureInPicture(),l=t,(n=new Image).crossOrigin=!0,n.src=l,e.next=7,n.decode();case 7:return p.getContext("2d").drawImage(n,0,0,512,512),e.next=10,f.play();case 10:return e.next=12,f.requestPictureInPicture();case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return navigator.mediaSession.setActionHandler("previoustrack",(function(){r&&r()})),navigator.mediaSession.setActionHandler("nexttrack",(function(){c&&c()})),navigator.mediaSession.setActionHandler("pause",(function(){n&&n(),document.pictureInPictureElement&&document.pictureInPictureElement.pause()})),navigator.mediaSession.setActionHandler("play",(function(){t&&t(),document.pictureInPictureElement&&document.pictureInPictureElement.play()})),{isPipToggled:o,togglePip:h,updatePip:g}}(n[l].thumbnail,(function(){return y(!0)}),(function(){return y(!1)}),x,P),k=w.isPipToggled,j=w.togglePip,I=w.updatePip;return r.a.createElement("div",{className:"container"},r.a.createElement("h1",null,"React useAudioPictureInPicture"),r.a.createElement("h3",null,"By ",r.a.createElement("a",{target:"_blank",href:"https://github.com/Thomascogez"},"Thomas Cogez")),r.a.createElement("img",{style:{width:"200px"},src:n[l].thumbnail}),r.a.createElement("audio",{onEnded:P,ref:e},r.a.createElement("source",{src:n[l].src})),r.a.createElement("p",null,"Now Playing : ","".concat(n[l].author," - ").concat(n[l].name)),r.a.createElement("div",{className:"player-controls"},r.a.createElement("button",{onClick:x},r.a.createElement("i",{className:"material-icons"},"skip_previous")),r.a.createElement("button",{onClick:function(){return y(!E)}},E?r.a.createElement("i",{className:"material-icons"},"pause"):r.a.createElement("i",{className:"material-icons"},"play_arrow")),r.a.createElement("button",{onClick:P},r.a.createElement("i",{className:"material-icons"},"skip_next")),r.a.createElement("br",null),r.a.createElement("button",{onClick:j,className:"btn-pip"},k?"Hide Picture In Picture Mode":"Toggle Audio Player in Picture In Picture Mode"),r.a.createElement("br",null),r.a.createElement("a",{style:{fontSize:"15px"},target:"_blank",href:"https://soundcloud.com/thomas-cogez"},"My SoundCloud")))};i.a.render(r.a.createElement(E,null),document.getElementById("root"))}],[[7,1,2]]]);
//# sourceMappingURL=main.44e36ec2.chunk.js.map